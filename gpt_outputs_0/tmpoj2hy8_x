<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="MissionPlan">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="CompositeTaskInformation" type="CompositeTaskInformationType"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>

    <xs:complexType name="CompositeTaskInformationType">
        <xs:sequence>
            <xs:element name="TaskDescription" type="xs:string"/>
            <xs:element name="Tasks" type="TasksType"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="TasksType">
        <xs:sequence>
            <xs:element maxOccurs="unbounded" ref="Task"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="TaskType">
        <xs:sequence>
            <xs:element name="TaskDescription" type="xs:string"/>
            <xs:element name="Action" type="xs:string"/>
            <xs:element name="Preconditions" type="xs:string"/>
            <xs:element name="Outcomes" type="OutcomesType"/>
        </xs:sequence>
    </xs:complexType>

    <xs:simpleType name="OutcomeType">
        <xs:complexType mixed="true">
            <xs:attribute name="name" type="xs:string"/>
            <xs:attribute name="description" type="xs:string"/>
            <xs:attribute name="action" type="xs:string"/>
        </xs:complexType>
    </xs:simpleType>

    <xs:complexType name="OutcomesType">
        <xs:sequence>
            <xs:element maxOccurs="unbounded" ref="Outcome"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="OutcomeType">
        <xs:attribute name="name" type="xs:string"/>
        <xs:attribute name="description" type="xs:string"/>
        <xs:attribute name="action" type="xs:string"/>
    </xs:complexType>

</xs:schema>

<MissionPlan>
    <CompositeTaskInformation>
        <TaskDescription>Drive to Tree 1 and inspect.</TaskDescription>
        <Tasks>
            <Task>
                <Action>Inspect</Action>
                <Preconditions/>
                <Outcomes>
                    <Outcome name="Inspection" description="Inspect the tree." action="None"/>
                </Outcomes>
            </Task>
            <Task>
                <Action>Pick fruit</Action>
                <Preconditions/>
                <Outcomes>
                    <Outcome name="Fruit picked" description="Pick some fruit from the tree." action="None"/>
                </Outcomes>
            </Task>
        </Tasks>
    </CompositeTaskInformation>
    <GeoJSON type="FeatureCollection">
        <Feature>
            <Geometry>
                <Point>
                    <coordinates>-122.084051 47.641847</coordinates>
                </Point>
            </Geometry>
            <Properties>
                <name>Tree 1</name>
                <type>Apple tree</type>
            </Properties>
        </Feature>
    </GeoJSON>
</MissionPlan>
